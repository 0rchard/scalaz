<?xml version="1.0" encoding="utf-8"?>
			<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
        <title>scalaz/Free.scala</title>
        <script type="text/javascript" src="../jquery-all.js"></script>
        <script type="text/javascript" src="../linked.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css" title="Style"></link>
    </head>
    <body>
        <pre>
<span class="keyword">package</span> scalaz

<span class="keyword">import</span> annotation.tailrec
<span class="keyword">import</span> <a href="#14810" title="object scalaz.Free">Free</a>._
<span class="keyword">import</span> <a href="Scalaz.scala.html#19508" title="object scalaz.Scalaz">Scalaz</a>._

<span class="comment">// TODO report compiler bug when this appears just above FreeInstances:</span>
<span class="comment">//      &quot;java.lang.Error: typeConstructor inapplicable for &lt;none&gt;&quot;</span>
<span class="keyword">object</span> <a title="object scalaz.Free" id="14810">Free</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#14824" title="scalaz.FreeFunctions">FreeFunctions</a> <span class="keyword">with</span> <a href="#14830" title="scalaz.FreeInstances">FreeInstances</a> <span class="delimiter">{</span>

  <span class="comment">/** Return from the computation with the given value. */</span>
  case <span class="keyword">class</span> <a title="class Return[S[+_], +A] extends java.lang.Object with scalaz.Free[S,A] with ScalaObject with Product with Serializable" id="182044">Return</a><span class="delimiter">[</span><a title="[+_]&gt;: Nothing &lt;: Any" id="181778">S</a><span class="delimiter">[</span>+<a title="&gt;: Nothing &lt;: Any" id="182040">_</a><span class="delimiter">]</span>, +<a title="&gt;: Nothing &lt;: Any" id="181779">A</a><span class="delimiter">]</span><a href="#182044" title="ScalaObject" class="delimiter">(</a><a title="A" id="182039">a</a>: <a href="#181779" title="A">A</a><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#14809" title="scalaz.Free[S,A]">Free</a><span class="delimiter">[</span>S, A<span class="delimiter">]</span>

  <span class="comment">/** Suspend the computation with the given suspension. */</span>
  case <span class="keyword">class</span> <a title="class Suspend[S[+_], +A] extends java.lang.Object with scalaz.Free[S,A] with ScalaObject with Product with Serializable" id="182035">Suspend</a><span class="delimiter">[</span><a title="[+_]&gt;: Nothing &lt;: Any" id="181850">S</a><span class="delimiter">[</span>+<a title="&gt;: Nothing &lt;: Any" id="182031">_</a><span class="delimiter">]</span>, +<a title="&gt;: Nothing &lt;: Any" id="181851">A</a><span class="delimiter">]</span><a href="#182035" title="ScalaObject" class="delimiter">(</a><a title="S[scalaz.Free[S,A]]" id="182030">a</a>: <a href="#181850" title="S[scalaz.Free[S,A]]">S</a><span class="delimiter">[</span>Free<span class="delimiter">[</span>S, A<span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#14809" title="scalaz.Free[S,A]">Free</a><span class="delimiter">[</span>S, A<span class="delimiter">]</span>

  <span class="comment">/** Call a subroutine and continue with the given function. */</span>
  case <span class="keyword">class</span> <a title="class Gosub[S[+_], A, +B] extends java.lang.Object with scalaz.Free[S,B] with ScalaObject with Product with Serializable" id="182026">Gosub</a><span class="delimiter">[</span><a title="[+_]&gt;: Nothing &lt;: Any" id="181946">S</a><span class="delimiter">[</span>+<a title="&gt;: Nothing &lt;: Any" id="182020">_</a><span class="delimiter">]</span>, <a title="&gt;: Nothing &lt;: Any" id="181947">A</a>, +<a title="&gt;: Nothing &lt;: Any" id="181948">B</a><span class="delimiter">]</span><a href="#182026" title="ScalaObject" class="delimiter">(</a><a title="scalaz.Free[S,A]" id="182018">a</a>: <a href="#14809" title="scalaz.Free[S,A]">Free</a><span class="delimiter">[</span>S, A<span class="delimiter">]</span>,
                                 <a title="A =&gt; scalaz.Free[S,B]" id="182019">f</a>: A =&gt; Free<span class="delimiter">[</span>S, B<span class="delimiter">]</span><span class="delimiter">)</span> <span class="keyword">extends</span> <a href="#14809" title="scalaz.Free[S,B]">Free</a><span class="delimiter">[</span>S, B<span class="delimiter">]</span>

  <span class="comment">/** A computation that can be stepped through, suspended, and paused */</span>
  <span class="keyword">type</span> <a title="[+A]scalaz.Free[Function0,A]" id="181682">Trampoline</a><span class="delimiter">[</span>+<a title="&gt;: Nothing &lt;: Any" id="181683">A</a><span class="delimiter">]</span> = <a href="#14809" title="scalaz.Free[Function0,A]">Free</a><span class="delimiter">[</span>Function0, A<span class="delimiter">]</span>

  <span class="comment">/** A computation that produces values of type `A`, eventually resulting in a value of type `B`. */</span>
  <span class="keyword">type</span> <a title="[A, +B]scalaz.Free[[+x](A, x),B]" id="181684">Source</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="181685">A</a>, +<a title="&gt;: Nothing &lt;: Any" id="181686">B</a><span class="delimiter">]</span> = <a href="#14809" title="scalaz.Free[[+x](A, x),B]">Free</a><span class="delimiter">[</span><span class="delimiter">(</span><span class="delimiter">{</span><span class="keyword">type</span> f<span class="delimiter">[</span>+x<span class="delimiter">]</span> = <span class="delimiter">(</span>A, x<span class="delimiter">)</span><span class="delimiter">}</span><span class="delimiter">)</span>#f, B<span class="delimiter">]</span>

  <span class="comment">/** A computation that accepts values of type `A`, eventually resulting in a value of type `B`.
    * Note the similarity to an [[scalaz.iteratee.Iteratee]].
    */</span>
  <span class="keyword">type</span> <a title="[A, +B]scalaz.Free[[+x]=&gt; A =&gt; x,B]" id="181687">Sink</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="181688">A</a>, +<a title="&gt;: Nothing &lt;: Any" id="181689">B</a><span class="delimiter">]</span> = <a href="#14809" title="scalaz.Free[[+x]=&gt; A =&gt; x,B]">Free</a><span class="delimiter">[</span><span class="delimiter">(</span><span class="delimiter">{</span><span class="keyword">type</span> f<span class="delimiter">[</span>+x<span class="delimiter">]</span> = <span class="delimiter">(</span>=&gt; A<span class="delimiter">)</span> =&gt; x<span class="delimiter">}</span><span class="delimiter">)</span>#f, B<span class="delimiter">]</span>
<span class="delimiter">}</span>

<span class="comment">/** A free operational monad for some functor `S`. Binding is done using the heap instead of the stack,
  * allowing tail-call elimination. */</span>
<span class="keyword">sealed</span> <span class="keyword">trait</span> <a title="trait Free[S[+_], +A] extends java.lang.Object with ScalaObject" id="14809">Free</a><span class="delimiter">[</span><a title="[+_]&gt;: Nothing &lt;: Any" id="22242">S</a><span class="delimiter">[</span>+<a title="&gt;: Nothing &lt;: Any" id="182045">_</a><span class="delimiter">]</span>, +<a title="&gt;: Nothing &lt;: Any" id="22243">A</a><span class="delimiter">]</span> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="[B](f: A =&gt; B)scalaz.Free[S,B]" id="181691">map</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="181693">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A =&gt; B" id="182048">f</a>: A =&gt; B<span class="delimiter">)</span>: <a href="#14809" title="scalaz.Free[S,B]">Free</a><span class="delimiter">[</span>S, B<span class="delimiter">]</span> =
    <a href="#181697" title="(f: A =&gt; scalaz.Free[S,B])scalaz.Free[S,B]">flatMap</a><span class="delimiter">(</span><a title="A" id="182057">a</a> =&gt; <a href="#182044" title="(a: B)scalaz.Free.Return[S,B]">Return</a><span class="delimiter">(</span><a href="#182048" title="(v1: A)B">f</a><span class="delimiter">(</span><a href="#182057" title="A">a</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/** Alias for `flatMap` */</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="[B](f: A =&gt; scalaz.Free[S,B])scalaz.Free[S,B]" id="181694">&gt;&gt;=</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="181696">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A =&gt; scalaz.Free[S,B]" id="182069">f</a>: A =&gt; Free<span class="delimiter">[</span>S, B<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#14809" title="scalaz.Free[S,B]">Free</a><span class="delimiter">[</span>S, B<span class="delimiter">]</span> = <a href="#14809" title="Free.this.type" class="keyword">this</a> <a href="#181697" title="(f: A =&gt; scalaz.Free[S,B])scalaz.Free[S,B]">flatMap</a> <a href="#182069" title="A =&gt; scalaz.Free[S,B]">f</a>

  <span class="comment">/** Binds the given continuation to the result of this computation.
    * All left-associated binds are reassociated to the right. */</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="[B](f: A =&gt; scalaz.Free[S,B])scalaz.Free[S,B]" id="181697">flatMap</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="181699">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A =&gt; scalaz.Free[S,B]" id="182051">f</a>: A =&gt; Free<span class="delimiter">[</span>S, B<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#14809" title="scalaz.Free[S,B]">Free</a><span class="delimiter">[</span>S, B<span class="delimiter">]</span> = <a href="#14809" title="scalaz.Free[S,A]" class="keyword">this</a> <span title="scalaz.Free[S,B]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="scalaz.Free.Gosub[S,Any,B]">Gosub</span><span class="delimiter">(</span><a title="scalaz.Free[S,Any]" id="182079">a</a>, <a title="Any =&gt; scalaz.Free[S,A]" id="182080">g</a><span class="delimiter">)</span> =&gt; <a href="#182026" title="(a: scalaz.Free[S,Any], f: Any =&gt; scalaz.Free[S,B])scalaz.Free.Gosub[S,Any,B]">Gosub</a><span class="delimiter">(</span><a href="#182079" title="scalaz.Free[S,Any]">a</a>, <span class="delimiter">(</span>x: <span title="Any">Any</span><span class="delimiter">)</span> =&gt; <a href="#182026" title="(a: scalaz.Free[S,A], f: A =&gt; scalaz.Free[S,B])scalaz.Free.Gosub[S,A,B]">Gosub</a><span class="delimiter">(</span><a href="#182080" title="(v1: Any)scalaz.Free[S,A]">g</a><span class="delimiter">(</span><a href="#182090" title="Any">x</a><span class="delimiter">)</span>, <a href="#182051" title="A =&gt; scalaz.Free[S,B]">f</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="scalaz.Free.Gosub[S,A,B]" id="182116">a</a>           =&gt; <a href="#182026" title="(a: scalaz.Free[S,A], f: A =&gt; scalaz.Free[S,B])scalaz.Free.Gosub[S,A,B]">Gosub</a><span class="delimiter">(</span><a href="#182116" title="scalaz.Free[S,A]">a</a>, <a href="#182051" title="A =&gt; scalaz.Free[S,B]">f</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Evaluates a single layer of the free monad. */</span>
  @tailrec <span class="keyword">final</span> <span class="keyword">def</span> <a title="(implicit S: scalaz.Functor[S])Either[S[scalaz.Free[S,A]],A]" id="181700">resume</a><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalaz.Functor[S]" id="182133">S</a>: <a href="Functor.scala.html#15118" title="scalaz.Functor[S]">Functor</a><span class="delimiter">[</span>S<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="Either[S[scalaz.Free[S,A]],A]">Either</span><span class="delimiter">[</span>S<span class="delimiter">[</span>Free<span class="delimiter">[</span>S, A<span class="delimiter">]</span><span class="delimiter">]</span>, A<span class="delimiter">]</span> = <a href="#14809" title="scalaz.Free[S,A]" class="keyword">this</a> <span title="Either[S[scalaz.Free[S,A]],A]" class="keyword">match</span> <span class="delimiter">{</span>
    <span class="keyword">case</span> <span title="Right[Nothing,A]">Return</span><span class="delimiter">(</span><a title="A" id="182138">a</a><span class="delimiter">)</span>  =&gt; <span title="(b: A)Right[Nothing,A]">Right</span><span class="delimiter">(</span><a href="#182138" title="A">a</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <span title="Left[S[scalaz.Free[S,A]],Nothing]">Suspend</span><span class="delimiter">(</span><a title="S[scalaz.Free[S,A]]" id="182146">t</a><span class="delimiter">)</span> =&gt; <span title="(a: S[scalaz.Free[S,A]])Left[S[scalaz.Free[S,A]],Nothing]">Left</span><span class="delimiter">(</span><a href="#182146" title="S[scalaz.Free[S,A]]">t</a><span class="delimiter">)</span>
    <span class="keyword">case</span> <a title="Either[S[scalaz.Free[S,A]],A]" id="182155">a</a> Gosub <a title="Any =&gt; scalaz.Free[S,A]" id="182156">f</a>  =&gt; <a href="#182155" title="scalaz.Free[S,Any]">a</a> <span title="Either[S[scalaz.Free[S,A]],A]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="Either[S[scalaz.Free[S,A]],A]">Return</span><span class="delimiter">(</span><a title="Any" id="182160">a</a><span class="delimiter">)</span>  =&gt; <a href="#182156" title="(v1: Any)scalaz.Free[S,A]">f</a><span class="delimiter">(</span><a href="#182160" title="Any">a</a><span class="delimiter">)</span>.<a href="#181700" title="(implicit S: scalaz.Functor[S])Either[S[scalaz.Free[S,A]],A]">resume</a>
      <span class="keyword">case</span> <span title="Left[S[scalaz.Free[S,A]],Nothing]">Suspend</span><span class="delimiter">(</span><a title="S[scalaz.Free[S,Any]]" id="182178">t</a><span class="delimiter">)</span> =&gt; <span title="(a: S[scalaz.Free[S,A]])Left[S[scalaz.Free[S,A]],Nothing]">Left</span><span class="delimiter">(</span><a href="#182133" title="scalaz.Functor[S]">S</a>.<a href="Functor.scala.html#39520" title="(r: S[scalaz.Free[S,Any]], f: scalaz.Free[S,Any] =&gt; scalaz.Free[S,A])S[scalaz.Free[S,A]]">fmap</a><span class="delimiter">(</span><a href="#182178" title="S[scalaz.Free[S,Any]]">t</a>, <span class="delimiter">(</span><span class="delimiter">(</span><a href="#182189" title="scalaz.Free[S,Any]">_</a>: <a href="#14809" title="scalaz.Free[S,Any]">Free</a><span class="delimiter">[</span>S, Any<span class="delimiter">]</span><span class="delimiter">)</span> <a href="#181694" title="(f: Any =&gt; scalaz.Free[S,A])scalaz.Free[S,A]">&gt;&gt;=</a> <a href="#182156" title="Any =&gt; scalaz.Free[S,A]">f</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <a title="Either[S[scalaz.Free[S,A]],A]" id="182201">b</a> Gosub <a title="Any =&gt; scalaz.Free[S,Any]" id="182202">g</a>  =&gt; <span class="delimiter">(</span><a href="#182026" title="(a: scalaz.Free[S,Any], f: Any =&gt; scalaz.Free[S,A])scalaz.Free.Gosub[S,Any,A]">Gosub</a><span class="delimiter">(</span><a href="#182201" title="scalaz.Free[S,Any]">b</a>, <span class="delimiter">(</span>x: <span title="Any">Any</span><span class="delimiter">)</span> =&gt; <a href="#182202" title="(v1: Any)scalaz.Free[S,Any]">g</a><span class="delimiter">(</span><a href="#182212" title="Any">x</a><span class="delimiter">)</span> <a href="#181694" title="(f: Any =&gt; scalaz.Free[S,A])scalaz.Free[S,A]">&gt;&gt;=</a> <a href="#182156" title="Any =&gt; scalaz.Free[S,A]">f</a><span class="delimiter">)</span>: <a href="#14809" title="scalaz.Free[S,A]">Free</a><span class="delimiter">[</span>S, A<span class="delimiter">]</span><span class="delimiter">)</span>.<a href="#181700" title="(implicit S: scalaz.Functor[S])Either[S[scalaz.Free[S,A]],A]">resume</a>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Modifies the suspension with the given natural transformation. */</span>
  <span class="keyword">final</span> <span class="keyword">def</span> <a title="[T[+_]](f: scalaz.~&gt;[S,T])(implicit S: scalaz.Functor[S])scalaz.Free[T,A]" id="181701">mapSuspension</a><span class="delimiter">[</span><a title="[+_]&gt;: Nothing &lt;: Any" id="181703">T</a><span class="delimiter">[</span>+<a title="&gt;: Nothing &lt;: Any" id="182228">_</a><span class="delimiter">]</span><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalaz.~&gt;[S,T]" id="182226">f</a>: S <a href="Extras.scala.html#9475" title="scalaz.~&gt;[S,T]">~&gt;</a> T<span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalaz.Functor[S]" id="182227">S</a>: <a href="Functor.scala.html#15118" title="scalaz.Functor[S]">Functor</a><span class="delimiter">[</span>S<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#14809" title="scalaz.Free[T,A]">Free</a><span class="delimiter">[</span>T, A<span class="delimiter">]</span> =
    <a href="#181700" title="(implicit S: scalaz.Functor[S])Either[S[scalaz.Free[S,A]],A]">resume</a> <span title="scalaz.Free[T,A]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="scalaz.Free.Suspend[T,A]">Left</span><span class="delimiter">(</span><a title="S[scalaz.Free[S,A]]" id="182233">s</a><span class="delimiter">)</span>  =&gt; <a href="#182035" title="(a: T[scalaz.Free[T,A]])scalaz.Free.Suspend[T,A]">Suspend</a><span class="delimiter">(</span><a href="Extras.scala.html#67808" title="(f: S[scalaz.Free[T,A]])T[scalaz.Free[T,A]]">f</a><span class="delimiter">(</span><a href="#182227" title="scalaz.Functor[S]">S</a>.<a href="Functor.scala.html#39520" title="(r: S[scalaz.Free[S,A]], f: scalaz.Free[S,A] =&gt; scalaz.Free[T,A])S[scalaz.Free[T,A]]">fmap</a><span class="delimiter">(</span><a href="#182233" title="S[scalaz.Free[S,A]]">s</a>, <span class="delimiter">(</span><span class="delimiter">(</span><a href="#182250" title="scalaz.Free[S,A]">_</a>: <a href="#14809" title="scalaz.Free[S,A]">Free</a><span class="delimiter">[</span>S, A<span class="delimiter">]</span><span class="delimiter">)</span> <a href="#181701" title="(f: scalaz.~&gt;[S,T])(implicit S: scalaz.Functor[S])scalaz.Free[T,A]">mapSuspension</a> <a href="#182226" title="scalaz.~&gt;[S,T]">f</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="scalaz.Free.Return[T,A]">Right</span><span class="delimiter">(</span><a title="A" id="182271">r</a><span class="delimiter">)</span> =&gt; <a href="#182044" title="(a: A)scalaz.Free.Return[T,A]">Return</a><span class="delimiter">(</span><a href="#182271" title="A">r</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>

  <span class="keyword">import</span> <a href="Liskov.scala.html#17306" title="object scalaz.Liskov">Liskov</a>._

  <span class="comment">/** Runs a trampoline all the way to the end, tail-recursively. */</span>
  <span class="keyword">def</span> <a title="[B &gt;: A](implicit ev: scalaz.Liskov.&lt;~&lt;[scalaz.Free[S,B],scalaz.Free.Trampoline[B]], implicit S: scalaz.Functor[S])B" id="181705">run</a><span class="delimiter">[</span><a title="&gt;: A &lt;: Any" id="181707">B</a> &gt;: A<span class="delimiter">]</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalaz.Liskov.&lt;~&lt;[scalaz.Free[S,B],scalaz.Free.Trampoline[B]]" id="182698">ev</a>: Free<span class="delimiter">[</span>S, B<span class="delimiter">]</span> <a href="Liskov.scala.html#17305" title="scalaz.Liskov.&lt;~&lt;[scalaz.Free[S,B],scalaz.Free.Trampoline[B]]">&lt;~&lt;</a> Trampoline<span class="delimiter">[</span>B<span class="delimiter">]</span>, <a title="scalaz.Functor[S]" id="182699">S</a>: <a href="Functor.scala.html#15118" title="scalaz.Functor[S]">Functor</a><span class="delimiter">[</span>S<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#181707" title="B">B</a> = <span class="delimiter">{</span>
    @tailrec <span class="keyword">def</span> <a title="(t: scalaz.Free.Trampoline[B])B" id="182720">go</a><span class="delimiter">(</span><a title="scalaz.Free.Trampoline[B]" id="182721">t</a>: <a href="#14809" title="scalaz.Free.Trampoline[B]">Trampoline</a><span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#181707" title="B">B</a> =
      <a href="#182721" title="scalaz.Free.Trampoline[B]">t</a>.<a href="#181700" title="(implicit S: scalaz.Functor[Function0])Either[() =&gt; scalaz.Free[Function0,B],B]">resume</a> <span title="B" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="B">Left</span><span class="delimiter">(</span><a title="() =&gt; scalaz.Free[Function0,B]" id="182982">s</a><span class="delimiter">)</span>  =&gt; <a href="#182720" title="(t: scalaz.Free.Trampoline[B])B">go</a><span class="delimiter">(</span><a href="#182982" title="()scalaz.Free[Function0,B]">s</a><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="B">Right</span><span class="delimiter">(</span><a title="B" id="182984">a</a><span class="delimiter">)</span> =&gt; <a href="#182984" title="B">a</a>
      <span class="delimiter">}</span>
    <a href="#182720" title="(t: scalaz.Free.Trampoline[B])B">go</a><span class="delimiter">(</span><a href="Liskov.scala.html#182293" title="(v1: scalaz.Free[S,B])scalaz.Free.Trampoline[B]">ev</a><span class="delimiter">(</span><a href="#14809" title="scalaz.Free[S,A]" class="keyword">this</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Interleave this computation with another, combining the results with the given function. */</span>
  <span class="keyword">def</span> <a title="[B, C](tb: scalaz.Free[S,B], f: (A, B) =&gt; C)(implicit S: scalaz.Functor[S])scalaz.Free[S,C]" id="181708">zipWith</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="181711">B</a>, <a title="&gt;: Nothing &lt;: Any" id="181712">C</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalaz.Free[S,B]" id="183074">tb</a>: <a href="#14809" title="scalaz.Free[S,B]">Free</a><span class="delimiter">[</span>S, B<span class="delimiter">]</span>, <a title="(A, B) =&gt; C" id="183075">f</a>: <span class="delimiter">(</span>A, B<span class="delimiter">)</span> =&gt; C<span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalaz.Functor[S]" id="183076">S</a>: <a href="Functor.scala.html#15118" title="scalaz.Functor[S]">Functor</a><span class="delimiter">[</span>S<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#14809" title="scalaz.Free[S,C]">Free</a><span class="delimiter">[</span>S, C<span class="delimiter">]</span> = <span class="delimiter">{</span>
    <span title="(_1: Either[S[scalaz.Free[S,A]],A], _2: Either[S[scalaz.Free[S,B]],B])(Either[S[scalaz.Free[S,A]],A], Either[S[scalaz.Free[S,B]],B])" class="delimiter">(</span><a href="#181700" title="(implicit S: scalaz.Functor[S])Either[S[scalaz.Free[S,A]],A]">resume</a>, <a href="#183074" title="scalaz.Free[S,B]">tb</a>.<a href="#181700" title="(implicit S: scalaz.Functor[S])Either[S[scalaz.Free[S,B]],B]">resume</a><span class="delimiter">)</span> <span title="scalaz.Free[S,C]" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="scalaz.Free.Suspend[S,C]" class="delimiter">(</span>Left<span class="delimiter">(</span><a title="S[scalaz.Free[S,A]]" id="183091">a</a><span class="delimiter">)</span>, Left<span class="delimiter">(</span><a title="S[scalaz.Free[S,B]]" id="183093">b</a><span class="delimiter">)</span><span class="delimiter">)</span>   =&gt; <a href="#182035" title="(a: S[scalaz.Free[S,C]])scalaz.Free.Suspend[S,C]">Suspend</a><span class="delimiter">(</span><a href="#183076" title="scalaz.Functor[S]">S</a>.<a href="Functor.scala.html#39520" title="(r: S[scalaz.Free[S,A]], f: scalaz.Free[S,A] =&gt; scalaz.Free.Suspend[S,C])S[scalaz.Free.Suspend[S,C]]">fmap</a><span class="delimiter">(</span><a href="#183091" title="S[scalaz.Free[S,A]]">a</a>,
        <span class="delimiter">(</span>x: <a href="#14809" title="scalaz.Free[S,A]">Free</a><span class="delimiter">[</span>S, A<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <a href="#182035" title="(a: S[scalaz.Free[S,C]])scalaz.Free.Suspend[S,C]">Suspend</a><span class="delimiter">(</span><a href="#183076" title="scalaz.Functor[S]">S</a>.<a href="Functor.scala.html#39520" title="(r: S[scalaz.Free[S,B]], f: scalaz.Free[S,B] =&gt; scalaz.Free[S,C])S[scalaz.Free[S,C]]">fmap</a><span class="delimiter">(</span><a href="#183093" title="S[scalaz.Free[S,B]]">b</a>, <span class="delimiter">(</span>y: <a href="#14809" title="scalaz.Free[S,B]">Free</a><span class="delimiter">[</span>S, B<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <a href="#183107" title="scalaz.Free[S,A]">x</a> <a href="#181708" title="(tb: scalaz.Free[S,B], f: (A, B) =&gt; C)(implicit S: scalaz.Functor[S])scalaz.Free[S,C]">zipWith</a><span class="delimiter">(</span><a href="#183119" title="scalaz.Free[S,B]">y</a>, <a href="#183075" title="(A, B) =&gt; C">f</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="scalaz.Free.Suspend[S,C]" class="delimiter">(</span>Left<span class="delimiter">(</span><a title="S[scalaz.Free[S,A]]" id="183144">a</a><span class="delimiter">)</span>, Right<span class="delimiter">(</span><a title="B" id="183146">b</a><span class="delimiter">)</span><span class="delimiter">)</span>  =&gt; <a href="#182035" title="(a: S[scalaz.Free[S,C]])scalaz.Free.Suspend[S,C]">Suspend</a><span class="delimiter">(</span><a href="#183076" title="scalaz.Functor[S]">S</a>.<a href="Functor.scala.html#39520" title="(r: S[scalaz.Free[S,A]], f: scalaz.Free[S,A] =&gt; scalaz.Free[S,C])S[scalaz.Free[S,C]]">fmap</a><span class="delimiter">(</span><a href="#183144" title="S[scalaz.Free[S,A]]">a</a>, <span class="delimiter">(</span>x: <a href="#14809" title="scalaz.Free[S,A]">Free</a><span class="delimiter">[</span>S, A<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <a href="#183158" title="scalaz.Free[S,A]">x</a> <a href="#181708" title="(tb: scalaz.Free[S,B], f: (A, B) =&gt; C)(implicit S: scalaz.Functor[S])scalaz.Free[S,C]">zipWith</a><span class="delimiter">(</span><a href="#182044" title="(a: B)scalaz.Free.Return[S,B]">Return</a><span class="delimiter">(</span><a href="#183146" title="B">b</a><span class="delimiter">)</span>, <a href="#183075" title="(A, B) =&gt; C">f</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="scalaz.Free.Suspend[S,C]" class="delimiter">(</span>Right<span class="delimiter">(</span><a title="A" id="183185">a</a><span class="delimiter">)</span>, Left<span class="delimiter">(</span><a title="S[scalaz.Free[S,B]]" id="183187">b</a><span class="delimiter">)</span><span class="delimiter">)</span>  =&gt; <a href="#182035" title="(a: S[scalaz.Free[S,C]])scalaz.Free.Suspend[S,C]">Suspend</a><span class="delimiter">(</span><a href="#183076" title="scalaz.Functor[S]">S</a>.<a href="Functor.scala.html#39520" title="(r: S[scalaz.Free[S,B]], f: scalaz.Free[S,B] =&gt; scalaz.Free[S,C])S[scalaz.Free[S,C]]">fmap</a><span class="delimiter">(</span><a href="#183187" title="S[scalaz.Free[S,B]]">b</a>, <span class="delimiter">(</span>y: <a href="#14809" title="scalaz.Free[S,B]">Free</a><span class="delimiter">[</span>S, B<span class="delimiter">]</span><span class="delimiter">)</span> =&gt; <a href="#182044" title="(a: A)scalaz.Free.Return[S,A]">Return</a><span class="delimiter">(</span><a href="#183185" title="A">a</a><span class="delimiter">)</span> <a href="#181708" title="(tb: scalaz.Free[S,B], f: (A, B) =&gt; C)(implicit S: scalaz.Functor[S])scalaz.Free[S,C]">zipWith</a><span class="delimiter">(</span><a href="#183199" title="scalaz.Free[S,B]">y</a>, <a href="#183075" title="(A, B) =&gt; C">f</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="scalaz.Free.Return[S,C]" class="delimiter">(</span>Right<span class="delimiter">(</span><a title="A" id="183237">a</a><span class="delimiter">)</span>, Right<span class="delimiter">(</span><a title="B" id="183239">b</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#182044" title="(a: C)scalaz.Free.Return[S,C]">Return</a><span class="delimiter">(</span><a href="#183075" title="(v1: A, v2: B)C">f</a><span class="delimiter">(</span><a href="#183237" title="A">a</a>, <a href="#183239" title="B">b</a><span class="delimiter">)</span><span class="delimiter">)</span>
    <span class="delimiter">}</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Runs a `Source` all the way to the end, tail-recursively, collecting the produced values. */</span>
  <span class="keyword">def</span> <a title="[B, C &gt;: A](implicit ev: scalaz.Liskov.&lt;~&lt;[scalaz.Free[S,C],scalaz.Free.Source[B,C]], implicit S: scalaz.Functor[S])(Vector[B], C)" id="181713">collect</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="181716">B</a>, <a title="&gt;: A &lt;: Any" id="181717">C</a> &gt;: A<span class="delimiter">]</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalaz.Liskov.&lt;~&lt;[scalaz.Free[S,C],scalaz.Free.Source[B,C]]" id="183251">ev</a>: Free<span class="delimiter">[</span>S, C<span class="delimiter">]</span> <a href="Liskov.scala.html#17305" title="scalaz.Liskov.&lt;~&lt;[scalaz.Free[S,C],scalaz.Free.Source[B,C]]">&lt;~&lt;</a> Source<span class="delimiter">[</span>B, C<span class="delimiter">]</span>,
                 <a title="scalaz.Functor[S]" id="183252">S</a>: <a href="Functor.scala.html#15118" title="scalaz.Functor[S]">Functor</a><span class="delimiter">[</span>S<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="(Vector[B], C)" class="delimiter">(</span>Vector<span class="delimiter">[</span>B<span class="delimiter">]</span>, C<span class="delimiter">)</span> = <span class="delimiter">{</span>
    @tailrec <span class="keyword">def</span> <a title="(c: scalaz.Free.Source[B,C], v: Vector[B])(Vector[B], C)" id="183387">go</a><span class="delimiter">(</span><a title="scalaz.Free.Source[B,C]" id="183388">c</a>: <a href="#14809" title="scalaz.Free.Source[B,C]">Source</a><span class="delimiter">[</span>B, C<span class="delimiter">]</span>, <a title="Vector[B]" id="183390">v</a>: <span title="Vector[B]">Vector</span><span class="delimiter">[</span>B<span class="delimiter">]</span> = <span title="(elems: Nothing*)scala.collection.immutable.Vector[Nothing]">Vector</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>: <span title="(Vector[B], C)" class="delimiter">(</span>Vector<span class="delimiter">[</span>B<span class="delimiter">]</span>, C<span class="delimiter">)</span> =
      <a href="#183388" title="scalaz.Free.Source[B,C]">c</a>.<a href="#181700" title="(implicit S: scalaz.Functor[[+x](B, x)])Either[(B, scalaz.Free[[+x](B, x),C]),C]">resume</a> <span title="(Vector[B], C)" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="(Vector[B], C)">Left</span><span class="delimiter">(</span><span class="delimiter">(</span><a title="B" id="183496">b</a>, <a title="scalaz.Free[[+x](B, x),C]" id="183497">cont</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#183387" title="(c: scalaz.Free.Source[B,C], v: Vector[B])(Vector[B], C)">go</a><span class="delimiter">(</span><a href="#183497" title="scalaz.Free[[+x](B, x),C]">cont</a>, <a href="#183390" title="Vector[B]">v</a> <span title="(elem: B)(implicit bf: scala.collection.generic.CanBuildFrom[scala.collection.immutable.Vector[B],B,Vector[B]])Vector[B]">:+</span> <a href="#183496" title="B">b</a><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="(Vector[B], C)">Right</span><span class="delimiter">(</span><a title="C" id="183825">r</a><span class="delimiter">)</span>        =&gt; <span title="(_1: Vector[B], _2: C)(Vector[B], C)" class="delimiter">(</span><a href="#183390" title="Vector[B]">v</a>, <a href="#183825" title="C">r</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <a href="#183387" title="(c: scalaz.Free.Source[B,C], v: Vector[B])(Vector[B], C)">go</a><span class="delimiter">(</span><a href="Liskov.scala.html#182293" title="(v1: scalaz.Free[S,C])scalaz.Free.Source[B,C]">ev</a><span class="delimiter">(</span><a href="#14809" title="scalaz.Free[S,A]" class="keyword">this</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Drive this `Source` with the given Sink. */</span>
  <span class="keyword">def</span> <a title="[E, B, C &gt;: A](sink: scalaz.Free.Sink[Option[E],B])(implicit ev: scalaz.Liskov.&lt;~&lt;[scalaz.Free[S,C],scalaz.Free.Source[E,C]], implicit S: scalaz.Functor[S])(C, B)" id="181718">drive</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="181722">E</a>, <a title="&gt;: Nothing &lt;: Any" id="181723">B</a>, <a title="&gt;: A &lt;: Any" id="181724">C</a> &gt;: A<span class="delimiter">]</span><span class="delimiter">(</span><a title="scalaz.Free.Sink[Option[E],B]" id="183922">sink</a>: <a href="#14809" title="scalaz.Free.Sink[Option[E],B]">Sink</a><span class="delimiter">[</span>Option<span class="delimiter">[</span>E<span class="delimiter">]</span>, B<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalaz.Liskov.&lt;~&lt;[scalaz.Free[S,C],scalaz.Free.Source[E,C]]" id="183923">ev</a>: Free<span class="delimiter">[</span>S, C<span class="delimiter">]</span> <a href="Liskov.scala.html#17305" title="scalaz.Liskov.&lt;~&lt;[scalaz.Free[S,C],scalaz.Free.Source[E,C]]">&lt;~&lt;</a> Source<span class="delimiter">[</span>E, C<span class="delimiter">]</span>, <a title="scalaz.Functor[S]" id="183924">S</a>: <a href="Functor.scala.html#15118" title="scalaz.Functor[S]">Functor</a><span class="delimiter">[</span>S<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="(C, B)" class="delimiter">(</span>C, B<span class="delimiter">)</span> = <span class="delimiter">{</span>
    @tailrec <span class="keyword">def</span> <a title="(src: scalaz.Free.Source[E,C], snk: scalaz.Free.Sink[Option[E],B])(C, B)" id="183929">go</a><span class="delimiter">(</span><a title="scalaz.Free.Source[E,C]" id="183930">src</a>: <a href="#14809" title="scalaz.Free.Source[E,C]">Source</a><span class="delimiter">[</span>E, C<span class="delimiter">]</span>, <a title="scalaz.Free.Sink[Option[E],B]" id="183931">snk</a>: <a href="#14809" title="scalaz.Free.Sink[Option[E],B]">Sink</a><span class="delimiter">[</span>Option<span class="delimiter">[</span>E<span class="delimiter">]</span>, B<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="(C, B)" class="delimiter">(</span>C, B<span class="delimiter">)</span> =
      <span title="(_1: Either[(E, scalaz.Free[[+x](E, x),C]),C], _2: Either[=&gt; Option[E] =&gt; scalaz.Free[[+x]=&gt; Option[E] =&gt; x,B],B])(Either[(E, scalaz.Free[[+x](E, x),C]),C], Either[=&gt; Option[E] =&gt; scalaz.Free[[+x]=&gt; Option[E] =&gt; x,B],B])" class="delimiter">(</span><a href="#183930" title="scalaz.Free.Source[E,C]">src</a>.<a href="#181700" title="(implicit S: scalaz.Functor[[+x](E, x)])Either[(E, scalaz.Free[[+x](E, x),C]),C]">resume</a>, <a href="#183931" title="scalaz.Free.Sink[Option[E],B]">snk</a>.<a href="#181700" title="(implicit S: scalaz.Functor[[+x]=&gt; Option[E] =&gt; x])Either[=&gt; Option[E] =&gt; scalaz.Free[[+x]=&gt; Option[E] =&gt; x,B],B]">resume</a><span class="delimiter">)</span> <span title="(C, B)" class="keyword">match</span> <span class="delimiter">{</span>
        <span class="keyword">case</span> <span title="(C, B)" class="delimiter">(</span>Left<span class="delimiter">(</span><span class="delimiter">(</span><a title="E" id="184141">e</a>, <a title="scalaz.Free[[+x](E, x),C]" id="184142">c</a><span class="delimiter">)</span><span class="delimiter">)</span>, Left<span class="delimiter">(</span><a title="=&gt; Option[E] =&gt; scalaz.Free[[+x]=&gt; Option[E] =&gt; x,B]" id="184144">f</a><span class="delimiter">)</span><span class="delimiter">)</span>  =&gt; <a href="#183929" title="(src: scalaz.Free.Source[E,C], snk: scalaz.Free.Sink[Option[E],B])(C, B)">go</a><span class="delimiter">(</span><a href="#184142" title="scalaz.Free[[+x](E, x),C]">c</a>, <a href="#184144" title="(v1: =&gt; Option[E])scalaz.Free[[+x]=&gt; Option[E] =&gt; x,B]">f</a><span class="delimiter">(</span><span title="(x: E)Some[E]">Some</span><span class="delimiter">(</span><a href="#184141" title="E">e</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="(C, B)" class="delimiter">(</span>Left<span class="delimiter">(</span><span class="delimiter">(</span><a title="E" id="184154">e</a>, <a title="scalaz.Free[[+x](E, x),C]" id="184155">c</a><span class="delimiter">)</span><span class="delimiter">)</span>, Right<span class="delimiter">(</span><a title="B" id="184157">y</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#183929" title="(src: scalaz.Free.Source[E,C], snk: scalaz.Free.Sink[Option[E],B])(C, B)">go</a><span class="delimiter">(</span><a href="#184155" title="scalaz.Free[[+x](E, x),C]">c</a>, <a href="#20135" title="object scalaz.Sink">Sink</a>.<a href="#184159" title="[S]=&gt; scalaz.Monad[[x]scalaz.Free[[+x]=&gt; S =&gt; x,x]]">sinkMonad</a><span title="scalaz.Monad[[x]scalaz.Free[[+x]=&gt; Option[E] =&gt; x,x]]" class="delimiter">[</span><span title="Option[E]">Option</span><span class="delimiter">[</span>E<span class="delimiter">]</span><span class="delimiter">]</span>.<a href="Pure.scala.html#39555" title="(a: =&gt; B)scalaz.Free[[+x]=&gt; Option[E] =&gt; x,B]">pure</a><span class="delimiter">(</span><a href="#184157" title="B">y</a><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="(C, B)" class="delimiter">(</span>Right<span class="delimiter">(</span><a title="C" id="184182">x</a><span class="delimiter">)</span>, Left<span class="delimiter">(</span><a title="=&gt; Option[E] =&gt; scalaz.Free[[+x]=&gt; Option[E] =&gt; x,B]" id="184184">f</a><span class="delimiter">)</span><span class="delimiter">)</span>      =&gt; <a href="#183929" title="(src: scalaz.Free.Source[E,C], snk: scalaz.Free.Sink[Option[E],B])(C, B)">go</a><span class="delimiter">(</span><a href="#20150" title="object scalaz.Source">Source</a>.<a href="#184186" title="[S]=&gt; scalaz.Monad[[x]scalaz.Free[[+x](S, x),x]]">sourceMonad</a><span title="scalaz.Monad[[x]scalaz.Free[[+x](E, x),x]]" class="delimiter">[</span><a href="#181722" title="E">E</a><span class="delimiter">]</span>.<a href="Pure.scala.html#39555" title="(a: =&gt; C)scalaz.Free[[+x](E, x),C]">pure</a><span class="delimiter">(</span><a href="#184182" title="C">x</a><span class="delimiter">)</span>, <a href="#184184" title="(v1: =&gt; Option[E])scalaz.Free[[+x]=&gt; Option[E] =&gt; x,B]">f</a><span class="delimiter">(</span><span title="object None">None</span><span class="delimiter">)</span><span class="delimiter">)</span>
        <span class="keyword">case</span> <span title="(C, B)" class="delimiter">(</span>Right<span class="delimiter">(</span><a title="C" id="184210">x</a><span class="delimiter">)</span>, Right<span class="delimiter">(</span><a title="B" id="184212">y</a><span class="delimiter">)</span><span class="delimiter">)</span>     =&gt; <span title="(_1: C, _2: B)(C, B)" class="delimiter">(</span><a href="#184210" title="C">x</a>, <a href="#184212" title="B">y</a><span class="delimiter">)</span>
      <span class="delimiter">}</span>
    <a href="#183929" title="(src: scalaz.Free.Source[E,C], snk: scalaz.Free.Sink[Option[E],B])(C, B)">go</a><span class="delimiter">(</span><a href="Liskov.scala.html#182293" title="(v1: scalaz.Free[S,C])scalaz.Free.Source[E,C]">ev</a><span class="delimiter">(</span><a href="#14809" title="scalaz.Free[S,A]" class="keyword">this</a><span class="delimiter">)</span>, <a href="#183922" title="scalaz.Free.Sink[Option[E],B]">sink</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Feed the given stream to this `Source`. */</span>
  <span class="keyword">def</span> <a title="[E, C &gt;: A](ss: Stream[E])(implicit ev: scalaz.Liskov.&lt;~&lt;[scalaz.Free[S,C],scalaz.Free.Sink[E,C]], implicit S: scalaz.Functor[S])C" id="181725">feed</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="181728">E</a>, <a title="&gt;: A &lt;: Any" id="181729">C</a> &gt;: A<span class="delimiter">]</span><span class="delimiter">(</span><a title="Stream[E]" id="184306">ss</a>: <span title="Stream[E]">Stream</span><span class="delimiter">[</span>E<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalaz.Liskov.&lt;~&lt;[scalaz.Free[S,C],scalaz.Free.Sink[E,C]]" id="184307">ev</a>: Free<span class="delimiter">[</span>S, C<span class="delimiter">]</span> <a href="Liskov.scala.html#17305" title="scalaz.Liskov.&lt;~&lt;[scalaz.Free[S,C],scalaz.Free.Sink[E,C]]">&lt;~&lt;</a> Sink<span class="delimiter">[</span>E, C<span class="delimiter">]</span>, <a title="scalaz.Functor[S]" id="184308">S</a>: <a href="Functor.scala.html#15118" title="scalaz.Functor[S]">Functor</a><span class="delimiter">[</span>S<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#181729" title="C">C</a> = <span class="delimiter">{</span>
    @tailrec <span class="keyword">def</span> <a title="(snk: scalaz.Free.Sink[E,C], rest: Stream[E])C" id="184313">go</a><span class="delimiter">(</span><a title="scalaz.Free.Sink[E,C]" id="184314">snk</a>: <a href="#14809" title="scalaz.Free.Sink[E,C]">Sink</a><span class="delimiter">[</span>E, C<span class="delimiter">]</span>, <a title="Stream[E]" id="184315">rest</a>: <span title="Stream[E]">Stream</span><span class="delimiter">[</span>E<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#181729" title="C">C</a> = <span title="(_1: Stream[E], _2: Either[=&gt; E =&gt; scalaz.Free[[+x]=&gt; E =&gt; x,C],C])(Stream[E], Either[=&gt; E =&gt; scalaz.Free[[+x]=&gt; E =&gt; x,C],C])" class="delimiter">(</span><a href="#184315" title="Stream[E]">rest</a>, <a href="#184314" title="scalaz.Free.Sink[E,C]">snk</a>.<a href="#181700" title="(implicit S: scalaz.Functor[[+x]=&gt; E =&gt; x])Either[=&gt; E =&gt; scalaz.Free[[+x]=&gt; E =&gt; x,C],C]">resume</a><span class="delimiter">)</span> <span title="C" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="C" class="delimiter">(</span><a title="E" id="184449">x</a> <a href="#184433" title="(xs: scala.collection.immutable.Stream[E])Option[(E, scala.collection.immutable.Stream[E])]">#::</a> <a title="scala.collection.immutable.Stream[E]" id="184450">xs</a>, Left<span class="delimiter">(</span><a title="=&gt; E =&gt; scalaz.Free[[+x]=&gt; E =&gt; x,C]" id="184452">f</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#184313" title="(snk: scalaz.Free.Sink[E,C], rest: Stream[E])C">go</a><span class="delimiter">(</span><a href="#184452" title="(v1: =&gt; E)scalaz.Free[[+x]=&gt; E =&gt; x,C]">f</a><span class="delimiter">(</span><a href="#184449" title="E">x</a><span class="delimiter">)</span>, <a href="#184450" title="scala.collection.immutable.Stream[E]">xs</a><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="C" class="delimiter">(</span><a href="#184457" title="(x: scala.collection.immutable.Stream[E])Some[scala.collection.immutable.Stream[E]]">Stream</a><span class="delimiter">(</span><span class="delimiter">)</span>, Left<span class="delimiter">(</span><a title="=&gt; E =&gt; scalaz.Free[[+x]=&gt; E =&gt; x,C]" id="184475">f</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#184313" title="(snk: scalaz.Free.Sink[E,C], rest: Stream[E])C">go</a><span class="delimiter">(</span><a href="#184475" title="(v1: =&gt; E)scalaz.Free[[+x]=&gt; E =&gt; x,C]">f</a><span class="delimiter">(</span><a href="Scalaz.scala.html#39888" title="(m: String)Nothing">error_</a><span class="delimiter">(</span><span title="java.lang.String(&quot;No more values.&quot;)" class="string">&quot;No more values.&quot;</span><span class="delimiter">)</span><span class="delimiter">)</span>, <span title="(xs: Nothing*)scala.collection.immutable.Stream[Nothing]">Stream</span><span class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="C" class="delimiter">(</span>_, Right<span class="delimiter">(</span><a title="C" id="184487">r</a><span class="delimiter">)</span><span class="delimiter">)</span>       =&gt; <a href="#184487" title="C">r</a>
    <span class="delimiter">}</span>
    <a href="#184313" title="(snk: scalaz.Free.Sink[E,C], rest: Stream[E])C">go</a><span class="delimiter">(</span><a href="Liskov.scala.html#182293" title="(v1: scalaz.Free[S,C])scalaz.Free.Sink[E,C]">ev</a><span class="delimiter">(</span><a href="#14809" title="scalaz.Free[S,A]" class="keyword">this</a><span class="delimiter">)</span>, <a href="#184306" title="Stream[E]">ss</a><span class="delimiter">)</span>
  <span class="delimiter">}</span>

  <span class="comment">/** Feed the given source to this `Sink`. */</span>
  <span class="keyword">def</span> <a title="[E, B, C &gt;: A](source: scalaz.Free.Source[E,B])(implicit ev: scalaz.Liskov.&lt;~&lt;[scalaz.Free[S,C],scalaz.Free.Sink[E,C]], implicit S: scalaz.Functor[S])(C, B)" id="181730">drain</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="181734">E</a>, <a title="&gt;: Nothing &lt;: Any" id="181735">B</a>, <a title="&gt;: A &lt;: Any" id="181736">C</a> &gt;: A<span class="delimiter">]</span><span class="delimiter">(</span><a title="scalaz.Free.Source[E,B]" id="184575">source</a>: <a href="#14809" title="scalaz.Free.Source[E,B]">Source</a><span class="delimiter">[</span>E, B<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalaz.Liskov.&lt;~&lt;[scalaz.Free[S,C],scalaz.Free.Sink[E,C]]" id="184576">ev</a>: Free<span class="delimiter">[</span>S, C<span class="delimiter">]</span> <a href="Liskov.scala.html#17305" title="scalaz.Liskov.&lt;~&lt;[scalaz.Free[S,C],scalaz.Free.Sink[E,C]]">&lt;~&lt;</a> Sink<span class="delimiter">[</span>E, C<span class="delimiter">]</span>, <a title="scalaz.Functor[S]" id="184577">S</a>: <a href="Functor.scala.html#15118" title="scalaz.Functor[S]">Functor</a><span class="delimiter">[</span>S<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="(C, B)" class="delimiter">(</span>C, B<span class="delimiter">)</span> = <span class="delimiter">{</span>
    @tailrec <span class="keyword">def</span> <a title="(src: scalaz.Free.Source[E,B], snk: scalaz.Free.Sink[E,C])(C, B)" id="184582">go</a><span class="delimiter">(</span><a title="scalaz.Free.Source[E,B]" id="184583">src</a>: <a href="#14809" title="scalaz.Free.Source[E,B]">Source</a><span class="delimiter">[</span>E, B<span class="delimiter">]</span>, <a title="scalaz.Free.Sink[E,C]" id="184584">snk</a>: <a href="#14809" title="scalaz.Free.Sink[E,C]">Sink</a><span class="delimiter">[</span>E, C<span class="delimiter">]</span><span class="delimiter">)</span>: <span title="(C, B)" class="delimiter">(</span>C, B<span class="delimiter">)</span> = <span title="(_1: Either[(E, scalaz.Free[[+x](E, x),B]),B], _2: Either[=&gt; E =&gt; scalaz.Free[[+x]=&gt; E =&gt; x,C],C])(Either[(E, scalaz.Free[[+x](E, x),B]),B], Either[=&gt; E =&gt; scalaz.Free[[+x]=&gt; E =&gt; x,C],C])" class="delimiter">(</span><a href="#184583" title="scalaz.Free.Source[E,B]">src</a>.<a href="#181700" title="(implicit S: scalaz.Functor[[+x](E, x)])Either[(E, scalaz.Free[[+x](E, x),B]),B]">resume</a>, <a href="#184584" title="scalaz.Free.Sink[E,C]">snk</a>.<a href="#181700" title="(implicit S: scalaz.Functor[[+x]=&gt; E =&gt; x])Either[=&gt; E =&gt; scalaz.Free[[+x]=&gt; E =&gt; x,C],C]">resume</a><span class="delimiter">)</span> <span title="(C, B)" class="keyword">match</span> <span class="delimiter">{</span>
      <span class="keyword">case</span> <span title="(C, B)" class="delimiter">(</span>Left<span class="delimiter">(</span><span class="delimiter">(</span><a title="E" id="184794">e</a>, <a title="scalaz.Free[[+x](E, x),B]" id="184795">c</a><span class="delimiter">)</span><span class="delimiter">)</span>, Left<span class="delimiter">(</span><a title="=&gt; E =&gt; scalaz.Free[[+x]=&gt; E =&gt; x,C]" id="184797">f</a><span class="delimiter">)</span><span class="delimiter">)</span>  =&gt; <a href="#184582" title="(src: scalaz.Free.Source[E,B], snk: scalaz.Free.Sink[E,C])(C, B)">go</a><span class="delimiter">(</span><a href="#184795" title="scalaz.Free[[+x](E, x),B]">c</a>, <a href="#184797" title="(v1: =&gt; E)scalaz.Free[[+x]=&gt; E =&gt; x,C]">f</a><span class="delimiter">(</span><a href="#184794" title="E">e</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="(C, B)" class="delimiter">(</span>Left<span class="delimiter">(</span><span class="delimiter">(</span><a title="E" id="184804">e</a>, <a title="scalaz.Free[[+x](E, x),B]" id="184805">c</a><span class="delimiter">)</span><span class="delimiter">)</span>, Right<span class="delimiter">(</span><a title="C" id="184807">y</a><span class="delimiter">)</span><span class="delimiter">)</span> =&gt; <a href="#184582" title="(src: scalaz.Free.Source[E,B], snk: scalaz.Free.Sink[E,C])(C, B)">go</a><span class="delimiter">(</span><a href="#184805" title="scalaz.Free[[+x](E, x),B]">c</a>, <a href="#20135" title="object scalaz.Sink">Sink</a>.<a href="#184159" title="[S]=&gt; scalaz.Monad[[x]scalaz.Free[[+x]=&gt; S =&gt; x,x]]">sinkMonad</a><span title="scalaz.Monad[[x]scalaz.Free[[+x]=&gt; E =&gt; x,x]]" class="delimiter">[</span><a href="#181734" title="E">E</a><span class="delimiter">]</span>.<a href="Pure.scala.html#39555" title="(a: =&gt; C)scalaz.Free[[+x]=&gt; E =&gt; x,C]">pure</a><span class="delimiter">(</span><a href="#184807" title="C">y</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="Nothing" class="delimiter">(</span>Right<span class="delimiter">(</span><a title="B" id="184818">x</a><span class="delimiter">)</span>, Left<span class="delimiter">(</span><a title="=&gt; E =&gt; scalaz.Free[[+x]=&gt; E =&gt; x,C]" id="184820">f</a><span class="delimiter">)</span><span class="delimiter">)</span>      =&gt; <a href="Scalaz.scala.html#39888" title="(m: String)Nothing">error_</a><span class="delimiter">(</span><span title="java.lang.String(&quot;Not enough values in source.&quot;)" class="string">&quot;Not enough values in source.&quot;</span><span class="delimiter">)</span>
      <span class="keyword">case</span> <span title="(C, B)" class="delimiter">(</span>Right<span class="delimiter">(</span><a title="B" id="184824">x</a><span class="delimiter">)</span>, Right<span class="delimiter">(</span><a title="C" id="184826">y</a><span class="delimiter">)</span><span class="delimiter">)</span>     =&gt; <span title="(_1: C, _2: B)(C, B)" class="delimiter">(</span><a href="#184826" title="C">y</a>, <a href="#184824" title="B">x</a><span class="delimiter">)</span>
    <span class="delimiter">}</span>
    <a href="#184582" title="(src: scalaz.Free.Source[E,B], snk: scalaz.Free.Sink[E,C])(C, B)">go</a><span class="delimiter">(</span><a href="#184575" title="scalaz.Free.Source[E,B]">source</a>, <a href="Liskov.scala.html#182293" title="(v1: scalaz.Free[S,C])scalaz.Free.Sink[E,C]">ev</a><span class="delimiter">(</span><a href="#14809" title="scalaz.Free[S,A]" class="keyword">this</a><span class="delimiter">)</span><span class="delimiter">)</span>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object scalaz.Trampoline" id="20570">Trampoline</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#20575" title="scalaz.TrampolineInstances">TrampolineInstances</a>

<span class="keyword">trait</span> <a title="trait TrampolineInstances extends java.lang.Object with ScalaObject" id="20575">TrampolineInstances</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">implicit</span> <span class="keyword">val</span> <a title="scalaz.Monad[scalaz.Free.Trampoline]" id="184921">trampolineMonad</a>: <a href="Monad.scala.html#18181" title="scalaz.Monad[scalaz.Free.Trampoline]">Monad</a><span class="delimiter">[</span>Trampoline<span class="delimiter">]</span> = <a href="#184927" title="java.lang.Object with scalaz.Monad[scalaz.Free.Trampoline]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalaz.Monad[scalaz.Free.Trampoline]" id="184927">Monad</a><span class="delimiter">[</span>Trampoline<span class="delimiter">]</span> <span class="delimiter">{</span>
    <span class="keyword">override</span> <span class="keyword">def</span> <a title="[A](a: =&gt; A)scalaz.Free[Function0,A]" id="185033">pure</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="185035">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; A" id="185041">a</a>: =&gt; A<span class="delimiter">)</span> = <a href="#181648" title="(value: =&gt; A)(implicit S: scalaz.Pointed[Function0])scalaz.Free[Function0,A]">return_</a><a href="Pointed.scala.html#185071" title="(implicit t: scalaz.Functor[Function0], implicit p: scalaz.Pure[Function0])scalaz.Pointed[Function0]" class="delimiter">(</a><a href="#185041" title="=&gt; A">a</a><span class="delimiter">)</span>
    <span class="keyword">def</span> <a title="[A, B](ta: scalaz.Free.Trampoline[A], f: A =&gt; scalaz.Free.Trampoline[B])scalaz.Free[Function0,B]" id="185036">bind</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="185039">A</a>, <a title="&gt;: Nothing &lt;: Any" id="185040">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalaz.Free.Trampoline[A]" id="186813">ta</a>: <a href="#14809" title="scalaz.Free.Trampoline[A]">Trampoline</a><span class="delimiter">[</span>A<span class="delimiter">]</span>, <a title="A =&gt; scalaz.Free.Trampoline[B]" id="186814">f</a>: A =&gt; Trampoline<span class="delimiter">[</span>B<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#186813" title="scalaz.Free.Trampoline[A]">ta</a> <a href="#181697" title="(f: A =&gt; scalaz.Free[Function0,B])scalaz.Free[Function0,B]">flatMap</a> <a href="#186814" title="A =&gt; scalaz.Free.Trampoline[B]">f</a>
  <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object scalaz.Sink" id="20135">Sink</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#20143" title="scalaz.SinkInstances">SinkInstances</a>

<span class="keyword">trait</span> <a title="trait SinkInstances extends java.lang.Object with ScalaObject" id="20143">SinkInstances</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[S]=&gt; scalaz.Monad[[x]scalaz.Free[[+x]=&gt; S =&gt; x,x]]" id="184159">sinkMonad</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="184161">S</a><span class="delimiter">]</span>: <a href="Monad.scala.html#18181" title="scalaz.Monad[[x]scalaz.Free[[+x]=&gt; S =&gt; x,x]]">Monad</a><span class="delimiter">[</span><span class="delimiter">(</span><span class="delimiter">{</span><span class="keyword">type</span> f<span class="delimiter">[</span>x<span class="delimiter">]</span> = Sink<span class="delimiter">[</span>S, x<span class="delimiter">]</span><span class="delimiter">}</span><span class="delimiter">)</span>#f<span class="delimiter">]</span> =
    <a href="#186853" title="java.lang.Object with scalaz.Monad[[x]scalaz.Free[[+x]=&gt; S =&gt; x,x]]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalaz.Monad[[x]scalaz.Free[[+x]=&gt; S =&gt; x,x]]" id="186853">Monad</a><span class="delimiter">[</span><span class="delimiter">(</span><span class="delimiter">{</span><span class="keyword">type</span> f<span class="delimiter">[</span>x<span class="delimiter">]</span> = Sink<span class="delimiter">[</span>S, x<span class="delimiter">]</span><span class="delimiter">}</span><span class="delimiter">)</span>#f<span class="delimiter">]</span> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="[A](a: =&gt; A)scalaz.Free.Suspend[[+x]=&gt; S =&gt; x,A]" id="186895">pure</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="186897">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; A" id="186903">a</a>: =&gt; A<span class="delimiter">)</span> =
        <a href="#182035" title="[S[+_], A](a: S[scalaz.Free[S,A]])scalaz.Free.Suspend[S,A]">Suspend</a><span title="(a: =&gt; S =&gt; scalaz.Free[[+x]=&gt; S =&gt; x,A])scalaz.Free.Suspend[[+x]=&gt; S =&gt; x,A]" class="delimiter">[</span><span class="delimiter">(</span><span class="delimiter">{</span><span class="keyword">type</span> f<span class="delimiter">[</span>+x<span class="delimiter">]</span> = <span class="delimiter">(</span>=&gt; S<span class="delimiter">)</span> =&gt; x<span class="delimiter">}</span><span class="delimiter">)</span>#<span title="[+x]=&gt; S =&gt; x">f</span>, <a href="#186897" title="A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; S" id="186918">s</a> =&gt;
          <a href="#182044" title="[S[+_], A](a: A)scalaz.Free.Return[S,A]">Return</a><span title="(a: A)scalaz.Free.Return[[+x]=&gt; S =&gt; x,A]" class="delimiter">[</span><span class="delimiter">(</span><span class="delimiter">{</span><span class="keyword">type</span> f<span class="delimiter">[</span>+x<span class="delimiter">]</span> = <span class="delimiter">(</span>=&gt; S<span class="delimiter">)</span> =&gt; x<span class="delimiter">}</span><span class="delimiter">)</span>#<span title="[+x]=&gt; S =&gt; x">f</span>, <a href="#186897" title="A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#186903" title="=&gt; A">a</a><span class="delimiter">)</span><span class="delimiter">)</span>
      <span class="keyword">def</span> <a title="[A, B](s: scalaz.Free.Sink[S,A], f: A =&gt; scalaz.Free.Sink[S,B])scalaz.Free[[+x]=&gt; S =&gt; x,B]" id="186898">bind</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="186901">A</a>, <a title="&gt;: Nothing &lt;: Any" id="186902">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalaz.Free.Sink[S,A]" id="186935">s</a>: <a href="#14809" title="scalaz.Free.Sink[S,A]">Sink</a><span class="delimiter">[</span>S, A<span class="delimiter">]</span>, <a title="A =&gt; scalaz.Free.Sink[S,B]" id="186936">f</a>: A =&gt; Sink<span class="delimiter">[</span>S, B<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#186935" title="scalaz.Free.Sink[S,A]">s</a> <a href="#181697" title="(f: A =&gt; scalaz.Free[[+x]=&gt; S =&gt; x,B])scalaz.Free[[+x]=&gt; S =&gt; x,B]">flatMap</a> <a href="#186936" title="A =&gt; scalaz.Free.Sink[S,B]">f</a>
    <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">object</span> <a title="object scalaz.Source" id="20150">Source</a> <span title="ScalaObject" class="keyword">extends</span> <a href="#20155" title="scalaz.SourceInstances">SourceInstances</a>

<span class="keyword">trait</span> <a title="trait SourceInstances extends java.lang.Object with ScalaObject" id="20155">SourceInstances</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[S]=&gt; scalaz.Monad[[x]scalaz.Free[[+x](S, x),x]]" id="184186">sourceMonad</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="184188">S</a><span class="delimiter">]</span>: <a href="Monad.scala.html#18181" title="scalaz.Monad[[x]scalaz.Free[[+x](S, x),x]]">Monad</a><span class="delimiter">[</span><span class="delimiter">(</span><span class="delimiter">{</span><span class="keyword">type</span> f<span class="delimiter">[</span>x<span class="delimiter">]</span> = Source<span class="delimiter">[</span>S, x<span class="delimiter">]</span><span class="delimiter">}</span><span class="delimiter">)</span>#f<span class="delimiter">]</span> =
    <a href="#186987" title="java.lang.Object with scalaz.Monad[[x]scalaz.Free[[+x](S, x),x]]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalaz.Monad[[x]scalaz.Free[[+x](S, x),x]]" id="186987">Monad</a><span class="delimiter">[</span><span class="delimiter">(</span><span class="delimiter">{</span><span class="keyword">type</span> f<span class="delimiter">[</span>x<span class="delimiter">]</span> = Source<span class="delimiter">[</span>S, x<span class="delimiter">]</span><span class="delimiter">}</span><span class="delimiter">)</span>#f<span class="delimiter">]</span> <span class="delimiter">{</span>
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="[A](a: =&gt; A)scalaz.Free.Return[[+x](S, x),A]" id="187029">pure</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="187031">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; A" id="187037">a</a>: =&gt; A<span class="delimiter">)</span> = <a href="#182044" title="[S[+_], A](a: A)scalaz.Free.Return[S,A]">Return</a><span title="(a: A)scalaz.Free.Return[[+x](S, x),A]" class="delimiter">[</span><span class="delimiter">(</span><span class="delimiter">{</span><span class="keyword">type</span> f<span class="delimiter">[</span>+x<span class="delimiter">]</span> = <span class="delimiter">(</span>S, x<span class="delimiter">)</span><span class="delimiter">}</span><span class="delimiter">)</span>#<span title="[+x](S, x)">f</span>, <a href="#187031" title="A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#187037" title="=&gt; A">a</a><span class="delimiter">)</span>
      <span class="keyword">def</span> <a title="[A, B](s: scalaz.Free.Source[S,A], f: A =&gt; scalaz.Free.Source[S,B])scalaz.Free[[+x](S, x),B]" id="187032">bind</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="187035">A</a>, <a title="&gt;: Nothing &lt;: Any" id="187036">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalaz.Free.Source[S,A]" id="187057">s</a>: <a href="#14809" title="scalaz.Free.Source[S,A]">Source</a><span class="delimiter">[</span>S, A<span class="delimiter">]</span>, <a title="A =&gt; scalaz.Free.Source[S,B]" id="187058">f</a>: A =&gt; Source<span class="delimiter">[</span>S, B<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#187057" title="scalaz.Free.Source[S,A]">s</a> <a href="#181697" title="(f: A =&gt; scalaz.Free[[+x](S, x),B])scalaz.Free[[+x](S, x),B]">flatMap</a> <a href="#187058" title="A =&gt; scalaz.Free.Source[S,B]">f</a>
    <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait FreeInstances extends java.lang.Object with ScalaObject" id="14830">FreeInstances</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="keyword">implicit</span> <span class="keyword">def</span> <a title="[S[+_]]=&gt; scalaz.Monad[[x]scalaz.Free[S,x]]" id="181739">freeMonad</a><span class="delimiter">[</span><a title="[+_]&gt;: Nothing &lt;: Any" id="181741">S</a><span class="delimiter">[</span>+<a title="&gt;: Nothing &lt;: Any" id="182167">_</a><span class="delimiter">]</span><span class="delimiter">]</span>: <a href="Monad.scala.html#18181" title="scalaz.Monad[[x]scalaz.Free[S,x]]">Monad</a><span class="delimiter">[</span><span class="delimiter">(</span><span class="delimiter">{</span><span class="keyword">type</span> f<span class="delimiter">[</span>x<span class="delimiter">]</span> = Free<span class="delimiter">[</span>S, x<span class="delimiter">]</span><span class="delimiter">}</span><span class="delimiter">)</span>#f<span class="delimiter">]</span> =
    <a href="#187108" title="java.lang.Object with scalaz.Monad[[x]scalaz.Free[S,x]]" class="keyword">new</a> <a title="anonymous class $anon extends java.lang.Object with scalaz.Monad[[x]scalaz.Free[S,x]]" id="187108">Monad</a><span class="delimiter">[</span><span class="delimiter">(</span><span class="delimiter">{</span><span class="keyword">type</span> f<span class="delimiter">[</span>x<span class="delimiter">]</span> = Free<span class="delimiter">[</span>S, x<span class="delimiter">]</span><span class="delimiter">}</span><span class="delimiter">)</span>#f<span class="delimiter">]</span> <span class="delimiter">{</span>
      <span class="keyword">def</span> <a title="[A](a: =&gt; A)scalaz.Free.Return[S,A]" id="187150">pure</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="187152">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; A" id="187163">a</a>: =&gt; A<span class="delimiter">)</span> = <a href="#182044" title="(a: A)scalaz.Free.Return[S,A]">Return</a><span class="delimiter">(</span><a href="#187163" title="=&gt; A">a</a><span class="delimiter">)</span>
      <span class="keyword">override</span> <span class="keyword">def</span> <a title="[A, B](fa: scalaz.Free[S,A], f: A =&gt; B)scalaz.Free[S,B]" id="187153">fmap</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="187156">A</a>, <a title="&gt;: Nothing &lt;: Any" id="187157">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalaz.Free[S,A]" id="187182">fa</a>: <a href="#14809" title="scalaz.Free[S,A]">Free</a><span class="delimiter">[</span>S, A<span class="delimiter">]</span>, <a title="A =&gt; B" id="187183">f</a>: A =&gt; B<span class="delimiter">)</span> = <a href="#187182" title="scalaz.Free[S,A]">fa</a> <a href="#181691" title="(f: A =&gt; B)scalaz.Free[S,B]">map</a> <a href="#187183" title="A =&gt; B">f</a>
      <span class="keyword">def</span> <a title="[A, B](a: scalaz.Free[S,A], f: A =&gt; scalaz.Free[S,B])scalaz.Free[S,B]" id="187158">bind</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="187161">A</a>, <a title="&gt;: Nothing &lt;: Any" id="187162">B</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalaz.Free[S,A]" id="187240">a</a>: <a href="#14809" title="scalaz.Free[S,A]">Free</a><span class="delimiter">[</span>S, A<span class="delimiter">]</span>, <a title="A =&gt; scalaz.Free[S,B]" id="187241">f</a>: A =&gt; Free<span class="delimiter">[</span>S, B<span class="delimiter">]</span><span class="delimiter">)</span> = <a href="#187240" title="scalaz.Free[S,A]">a</a> <a href="#181697" title="(f: A =&gt; scalaz.Free[S,B])scalaz.Free[S,B]">flatMap</a> <a href="#187241" title="A =&gt; scalaz.Free[S,B]">f</a>
    <span class="delimiter">}</span>
<span class="delimiter">}</span>

<span class="keyword">trait</span> <a title="trait FreeFunctions extends java.lang.Object with ScalaObject" id="14824">FreeFunctions</a> <span title="ScalaObject" class="delimiter">{</span>
  <span class="comment">/** Collapse a trampoline to a single step. */</span>
  <span class="keyword">def</span> <a title="[A](r: scalaz.Free.Trampoline[A])scalaz.Free.Trampoline[A]" id="181645">reset</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="181647">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="scalaz.Free.Trampoline[A]" id="187310">r</a>: <a href="#14809" title="scalaz.Free.Trampoline[A]">Trampoline</a><span class="delimiter">[</span>A<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#14809" title="scalaz.Free.Trampoline[A]">Trampoline</a><span class="delimiter">[</span>A<span class="delimiter">]</span> = <a href="#181648" title="(value: =&gt; A)(implicit S: scalaz.Pointed[Function0])scalaz.Free[Function0,A]">return_</a><a href="Pointed.scala.html#185071" title="(implicit t: scalaz.Functor[Function0], implicit p: scalaz.Pure[Function0])scalaz.Pointed[Function0]" class="delimiter">(</a><a href="#187310" title="scalaz.Free.Trampoline[A]">r</a>.<a href="#181705" title="(implicit ev: scalaz.Liskov.&lt;~&lt;[scalaz.Free[Function0,A],scalaz.Free.Trampoline[A]], implicit S: scalaz.Functor[Function0])A">run</a><span class="delimiter">)</span>

  <span class="comment">/** Suspend the given computation in a single step. */</span>
  <span class="keyword">def</span> <a title="[S[+_], A](value: =&gt; A)(implicit S: scalaz.Pointed[S])scalaz.Free[S,A]" id="181648">return_</a><span class="delimiter">[</span><a title="[+_]&gt;: Nothing &lt;: Any" id="181651">S</a><span class="delimiter">[</span>+<a title="&gt;: Nothing &lt;: Any" id="185051">_</a><span class="delimiter">]</span>, <a title="&gt;: Nothing &lt;: Any" id="181652">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; A" id="185049">value</a>: =&gt; A<span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalaz.Pointed[S]" id="185050">S</a>: <a href="Pointed.scala.html#19102" title="scalaz.Pointed[S]">Pointed</a><span class="delimiter">[</span>S<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#14809" title="scalaz.Free[S,A]">Free</a><span class="delimiter">[</span>S, A<span class="delimiter">]</span> =
    <a href="#182035" title="[S[+_], A](a: S[scalaz.Free[S,A]])scalaz.Free.Suspend[S,A]">Suspend</a><span title="(a: S[scalaz.Free[S,A]])scalaz.Free.Suspend[S,A]" class="delimiter">[</span><a href="#181651" title="S">S</a>, <a href="#181652" title="A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#185050" title="scalaz.Pointed[S]">S</a>.<a href="Pure.scala.html#39555" title="(a: =&gt; scalaz.Free.Return[S,A])S[scalaz.Free.Return[S,A]]">pure</a><span class="delimiter">(</span><a href="#182044" title="[S[+_], A](a: A)scalaz.Free.Return[S,A]">Return</a><span title="(a: A)scalaz.Free.Return[S,A]" class="delimiter">[</span><a href="#181651" title="S">S</a>, <a href="#181652" title="A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#185049" title="=&gt; A">value</a><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="keyword">def</span> <a title="[S[+_], A](value: =&gt; scalaz.Free[S,A])(implicit S: scalaz.Pointed[S])scalaz.Free[S,A]" id="181653">suspend</a><span class="delimiter">[</span><a title="[+_]&gt;: Nothing &lt;: Any" id="181656">S</a><span class="delimiter">[</span>+<a title="&gt;: Nothing &lt;: Any" id="188132">_</a><span class="delimiter">]</span>, <a title="&gt;: Nothing &lt;: Any" id="181657">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; scalaz.Free[S,A]" id="188130">value</a>: =&gt; Free<span class="delimiter">[</span>S, A<span class="delimiter">]</span><span class="delimiter">)</span><span class="delimiter">(</span><span class="keyword">implicit</span> <a title="scalaz.Pointed[S]" id="188131">S</a>: <a href="Pointed.scala.html#19102" title="scalaz.Pointed[S]">Pointed</a><span class="delimiter">[</span>S<span class="delimiter">]</span><span class="delimiter">)</span>: <a href="#14809" title="scalaz.Free[S,A]">Free</a><span class="delimiter">[</span>S, A<span class="delimiter">]</span> =
    <a href="#182035" title="[S[+_], A](a: S[scalaz.Free[S,A]])scalaz.Free.Suspend[S,A]">Suspend</a><span title="(a: S[scalaz.Free[S,A]])scalaz.Free.Suspend[S,A]" class="delimiter">[</span><a href="#181656" title="S">S</a>, <a href="#181657" title="A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#188131" title="scalaz.Pointed[S]">S</a>.<a href="Pure.scala.html#39555" title="(a: =&gt; scalaz.Free[S,A])S[scalaz.Free[S,A]]">pure</a><span class="delimiter">(</span><a href="#188130" title="=&gt; scalaz.Free[S,A]">value</a><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/** A trampoline step that doesn't do anything. */</span>
  <span class="keyword">def</span> <a title="=&gt; scalaz.Free.Trampoline[Unit]" id="181658">pause</a>: <a href="#14809" title="scalaz.Free.Trampoline[Unit]">Trampoline</a><span class="delimiter">[</span>Unit<span class="delimiter">]</span> =
    <a href="#181648" title="(value: =&gt; Unit)(implicit S: scalaz.Pointed[Function0])scalaz.Free[Function0,Unit]">return_</a><a href="Pointed.scala.html#185071" title="(implicit t: scalaz.Functor[Function0], implicit p: scalaz.Pure[Function0])scalaz.Pointed[Function0]" class="delimiter">(</a><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/** A source that produces the given value. */</span>
  <span class="keyword">def</span> <a title="[A](a: A)scalaz.Free.Source[A,Unit]" id="181659">produce</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="181661">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="A" id="188702">a</a>: <a href="#181661" title="A">A</a><span class="delimiter">)</span>: <a href="#14809" title="scalaz.Free.Source[A,Unit]">Source</a><span class="delimiter">[</span>A, Unit<span class="delimiter">]</span> =
    <a href="#182035" title="[S[+_], A](a: S[scalaz.Free[S,A]])scalaz.Free.Suspend[S,A]">Suspend</a><span title="(a: (A, scalaz.Free[[+x](A, x),Unit]))scalaz.Free.Suspend[[+x](A, x),Unit]" class="delimiter">[</span><span class="delimiter">(</span><span class="delimiter">{</span><span class="keyword">type</span> f<span class="delimiter">[</span>+x<span class="delimiter">]</span> = <span class="delimiter">(</span>A, x<span class="delimiter">)</span><span class="delimiter">}</span><span class="delimiter">)</span>#<span title="[+x](A, x)">f</span>, <span title="Unit">Unit</span><span class="delimiter">]</span><span class="delimiter">(</span><a href="#188702" title="(x: A)ArrowAssoc[A]">a</a> <span title="(y: scalaz.Free.Return[[+x](A, x),Unit])(A, scalaz.Free.Return[[+x](A, x),Unit])">-&gt;</span> <a href="#182044" title="[S[+_], A](a: A)scalaz.Free.Return[S,A]">Return</a><span title="(a: Unit)scalaz.Free.Return[[+x](A, x),Unit]" class="delimiter">[</span><span class="delimiter">(</span><span class="delimiter">{</span><span class="keyword">type</span> f<span class="delimiter">[</span>+x<span class="delimiter">]</span> = <span class="delimiter">(</span>A, x<span class="delimiter">)</span><span class="delimiter">}</span><span class="delimiter">)</span>#<span title="[+x](A, x)">f</span>, <span title="Unit">Unit</span><span class="delimiter">]</span><span class="delimiter">(</span><span title="Unit" class="delimiter">(</span><span class="delimiter">)</span><span class="delimiter">)</span><span class="delimiter">)</span>

  <span class="comment">/** A sink that waits for a single value and returns it. */</span>
  <span class="keyword">def</span> <a title="[A]=&gt; scalaz.Free.Sink[A,A]" id="181662">await</a><span class="delimiter">[</span><a title="&gt;: Nothing &lt;: Any" id="181664">A</a><span class="delimiter">]</span>: <a href="#14809" title="scalaz.Free.Sink[A,A]">Sink</a><span class="delimiter">[</span>A, A<span class="delimiter">]</span> =
    <a href="#182035" title="[S[+_], A](a: S[scalaz.Free[S,A]])scalaz.Free.Suspend[S,A]">Suspend</a><span title="(a: =&gt; A =&gt; scalaz.Free[[+x]=&gt; A =&gt; x,A])scalaz.Free.Suspend[[+x]=&gt; A =&gt; x,A]" class="delimiter">[</span><span class="delimiter">(</span><span class="delimiter">{</span><span class="keyword">type</span> f<span class="delimiter">[</span>+x<span class="delimiter">]</span> = <span class="delimiter">(</span>=&gt; A<span class="delimiter">)</span> =&gt; x<span class="delimiter">}</span><span class="delimiter">)</span>#<span title="[+x]=&gt; A =&gt; x">f</span>, <a href="#181664" title="A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a title="=&gt; A" id="188778">a</a> =&gt; <a href="#182044" title="[S[+_], A](a: A)scalaz.Free.Return[S,A]">Return</a><span title="(a: A)scalaz.Free.Return[[+x]=&gt; A =&gt; x,A]" class="delimiter">[</span><span class="delimiter">(</span><span class="delimiter">{</span><span class="keyword">type</span> f<span class="delimiter">[</span>+x<span class="delimiter">]</span> = <span class="delimiter">(</span>=&gt; A<span class="delimiter">)</span> =&gt; x<span class="delimiter">}</span><span class="delimiter">)</span>#<span title="[+x]=&gt; A =&gt; x">f</span>, <a href="#181664" title="A">A</a><span class="delimiter">]</span><span class="delimiter">(</span><a href="#188778" title="=&gt; A">a</a><span class="delimiter">)</span><span class="delimiter">)</span>
<span class="delimiter">}</span>



        </pre>
    </body>
</html>